# ν•κµ­μ–΄ μλ£ μƒλ‹΄ μ±—λ΄‡μ„ μ„ν• κ²½λ‰ν™” LLM κµ¬ν„ λ° μµμ ν™”

## π― ν”„λ΅μ νΈ κ°μ”
42dot LLMμ„ λ² μ΄μ¤λ΅ ν•μ—¬ μλ£ λ„λ©”μΈμ— νΉν™”λ κ²½λ‰ν™” λ¨λΈμ„ κµ¬ν„ν•κ³ , PEFT(LoRA) κΈ°λ²•μ„ ν™μ©ν• ν¨μ¨μ μΈ νμΈνλ‹μ„ μν–‰ν•λ” ν”„λ΅μ νΈμ…λ‹λ‹¤.

## π› οΈ κΈ°μ μ  μ ‘κ·Όλ²•

### 1. λ² μ΄μ¤ λ¨λΈ μ„ νƒ
- **42dot/42dot_LLM-SFT-1.3B**: ν•κµ­μ–΄ νΉν™” LLM λ¨λΈ ν™μ©
- 1.3B νλΌλ―Έν„°λ΅ μ μ ν• ν¬κΈ°μ™€ μ„±λ¥μ κ· ν•

### 2. PEFT(LoRA) κΈ°λ° κ²½λ‰ν™”
- **Parameter Efficient Fine-Tuning**: μ „μ²΄ λ¨λΈ λ€μ‹  μ μ‘κΈ°λ§ ν•™μµ
- **λ©”λ¨λ¦¬ ν¨μ¨μ„±**: M2 Pro Macμ—μ„λ„ μ•μ •μ  ν•™μµ κ°€λ¥
- **λ„λ©”μΈ νΉν™”**: μλ£ λ°μ΄ν„°λ΅ ν¨μ¨μ  νμΈνλ‹

### 3. μλ£ λ„λ©”μΈ νΉν™”
- **AI Hub μλ£ λ°μ΄ν„°**: ν•„μμλ£ + μ „λ¬Έμλ£ λ°μ΄ν„° ν™μ©
- **μ£Όκ΄€μ‹ λ°μ΄ν„° ν•„ν„°λ§**: κ°κ΄€μ‹ μ μ™Έν•κ³  μ£Όκ΄€μ‹λ§ ν•™μµ
- **μ•μ „μ„± μ°μ„ **: μλ£ μ±—λ΄‡μ μ•μ „μ„± κ°•μ΅°

## π“ λ°μ΄ν„° κµ¬μ„±

### μλ£ λ„λ©”μΈ νΉν™” λ°μ΄ν„° (100%)
- **ν•„μμλ£ μν•™μ§€μ‹ λ°μ΄ν„°**: κΈ°λ³Έ μλ£ μƒλ‹΄ λ¥λ ¥ ν•™μµ
- **μ „λ¬Έ μν•™μ§€μ‹ λ°μ΄ν„°**: κ³ λ„μ μ „λ¬Έ μν•™ μ§€μ‹ ν•™μµ
- **μ£Όκ΄€μ‹ λ°μ΄ν„°λ§ ν™μ©**: κ°κ΄€μ‹ μ μ™Έν•κ³  μ£Όκ΄€μ‹ Q&Aλ§ ν•™μµ
- **Train/Validation/Test λ¶„ν• **: 8:1:1 λΉ„μ¨λ΅ λ°μ΄ν„° λ¶„ν• 

## β… μ™„λ£λ μ‘μ—…

### Phase 1: λ°μ΄ν„° μμ§‘ λ° μ „μ²λ¦¬ β…
- [x] AI Hubμ—μ„ μλ£ λ°μ΄ν„° λ‹¤μ΄λ΅λ“ λ° ν’μ§ κ²€μ¦
- [x] λ°μ΄ν„° ν†µν•©, μ •μ , ν•™μµ/κ²€μ¦/ν…μ¤νΈ λ¶„ν• 
- [x] μ£Όκ΄€μ‹ λ°μ΄ν„° ν•„ν„°λ§ (κ°κ΄€μ‹ μ μ™Έ)

### Phase 2: PEFT κΈ°λ° νμΈνλ‹ β…
- [x] 42dot LLM λ¨λΈ λ΅λ“ λ° μ„±λ¥ κ²€μ¦
- [x] PEFT(LoRA) κΈ°λ²•μ„ ν™μ©ν• ν¨μ¨μ  νμΈνλ‹
- [x] M2 Pro Mac ν™κ²½μ—μ„ λ©”λ¨λ¦¬ μµμ ν™”

### Phase 3: ν”„λ΅¬ν”„νΈ μ—”μ§€λ‹μ–΄λ§ λ° ν‰κ°€ β…
- [x] 3κ°€μ§€ ν”„λ΅¬ν”„νΈ μ „λµ λΉ„κµ (Basic, Improved, Optimized)
- [x] BERTScore λ° μλ£ νΉν™” λ©”νΈλ¦­μΌλ΅ μ„±λ¥ ν‰κ°€
- [x] μ•μ „μ„± μ°μ„  ν”„λ΅¬ν”„νΈ μµμ ν™”

## π“ μµμΆ… μ„±λ¥ κ²°κ³Ό

### π† ν”„λ΅¬ν”„νΈ μ„±λ¥ λΉ„κµ (3κ°€μ§€ μ „λµ)

| λ©”νΈλ¦­ | Basic | Improved | Optimized | μµκ³  μ„±λ¥ |
|--------|-------|----------|-----------|-----------|
| **BERTScore F1** | 0.6590 | 0.6527 | **0.6563** | π¥‡ **Optimized** |
| **μ‘λ‹µ κΈΈμ΄** | **228.3μ** | 282.3μ | 275.0μ | π¥‡ **Basic** |
| **μλ£ μ©μ–΄ ν¬ν•¨λ„** | 0.1058 | **0.1381** | 0.1159 | π¥‡ **Improved** |
| **μ•μ „μ„± μ μ** | **0.814** | 0.704 | 0.740 | π¥‡ **Basic** |
| **μ‘λ‹µ ν’μ§** | 0.978 | 0.994 | **0.996** | π¥‡ **Optimized** |

### π― ν•µμ‹¬ μ„±κ³Ό
- **PEFT κΈ°λ²•**: M2 Pro Macμ—μ„ μ•μ •μ  ν•™μµ μ™„λ£
- **μ•μ „μ„± μ°μ„ **: Basic ν”„λ΅¬ν”„νΈκ°€ κ°€μ¥ μ•μ „ (0.814)
- **μ •ν™•λ„**: Optimized ν”„λ΅¬ν”„νΈκ°€ Basicμ— κ·Όμ ‘ν• μ„±λ¥
- **λ©”λ¨λ¦¬ ν¨μ¨μ„±**: μ „μ²΄ λ¨λΈ λ€μ‹  μ μ‘κΈ°λ§ ν•™μµμΌλ΅ λ©”λ¨λ¦¬ μ μ•½

### π’΅ μµμΆ… κ¶μ¥μ‚¬ν•­
**Basic ν”„λ΅¬ν”„νΈ μ‚¬μ©** - μλ£ μ±—λ΄‡μ—μ„ μ•μ „μ„±μ΄ μµμ°μ„ μ΄λ―€λ΅ κ°€μ¥ μ•μ „ν• Basic ν”„λ΅¬ν”„νΈλ¥Ό κ¶μ¥ν•©λ‹λ‹¤.

## π€ ν”„λ΅μ νΈ μ°¨λ³„ν™” ν¬μΈνΈ

1. **PEFT κΈ°λ²• ν™μ©**: λ©”λ¨λ¦¬ ν¨μ¨μ μΈ νμΈνλ‹μΌλ΅ κ°μΈ ν™κ²½μ—μ„λ„ ν•™μµ κ°€λ¥
2. **μ•μ „μ„± μ°μ„ **: μλ£ μ±—λ΄‡μ μ•μ „μ„±μ„ μµμ°μ„ μΌλ΅ κ³ λ ¤ν• ν”„λ΅¬ν”„νΈ μ„¤κ³„
3. **μ²΄κ³„μ  ν‰κ°€**: BERTScoreμ™€ μλ£ νΉν™” λ©”νΈλ¦­μ„ ν†µν• μ •λ‰μ  μ„±λ¥ ν‰κ°€
4. **μ‹¤μ©μ  μ ‘κ·Ό**: λ³µμ΅ν• ν”„λ΅¬ν”„νΈλ³΄λ‹¤ κ°„λ‹¨ν•κ³  μ•μ „ν• ν”„λ΅¬ν”„νΈκ°€ λ” ν¨κ³Όμ μ„μ„ μ…μ¦

## π“ ν”„λ΅μ νΈ κµ¬μ΅°
```
chat/
β”β”€β”€ data/                    # λ°μ΄ν„° μ €μ¥μ†
β”‚   β”β”€β”€ raw/                # μ›λ³Έ λ°μ΄ν„° (tar νμΌ)
β”‚   β”β”€β”€ processed/          # μ „μ²λ¦¬λ λ°μ΄ν„°
β”‚   β””β”€β”€ splits/             # ν•™μµ/κ²€μ¦/ν…μ¤νΈ λ¶„ν• 
β”β”€β”€ models/                 # λ¨λΈ μ €μ¥μ†
β”‚   β””β”€β”€ medical_finetuned_peft/  # PEFT νμΈνλ‹λ λ¨λΈ
β”β”€β”€ scripts/                # μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
β”‚   β”β”€β”€ peft_medical_finetuning.py      # PEFT νμΈνλ‹
β”‚   β”β”€β”€ peft_medical_evaluation.py      # λ¨λΈ ν‰κ°€
β”‚   β”β”€β”€ improved_prompt_evaluation.py   # κ°μ„ λ ν”„λ΅¬ν”„νΈ ν‰κ°€
β”‚   β”β”€β”€ optimized_prompt_evaluation.py  # μµμ ν™”λ ν”„λ΅¬ν”„νΈ ν‰κ°€
β”‚   β””β”€β”€ triple_prompt_comparison.py     # 3κ° ν”„λ΅¬ν”„νΈ λΉ„κµ
β”β”€β”€ results/                # ν‰κ°€ κ²°κ³Ό
β”‚   β”β”€β”€ peft_model_evaluation.json      # Basic ν”„λ΅¬ν”„νΈ κ²°κ³Ό
β”‚   β”β”€β”€ improved_prompt_evaluation.json # Improved ν”„λ΅¬ν”„νΈ κ²°κ³Ό
β”‚   β””β”€β”€ optimized_prompt_evaluation.json # Optimized ν”„λ΅¬ν”„νΈ κ²°κ³Ό
β””β”€β”€ README.md               # ν”„λ΅μ νΈ λ¬Έμ„
```

## π› οΈ μ„¤μΉ λ° μ‹¤ν–‰

### ν™κ²½ μ„¤μ •
```bash
# κ°€μƒν™κ²½ μƒμ„±
python -m venv venv
source venv/bin/activate  # Linux/Mac

# μμ΅΄μ„± μ„¤μΉ
pip install torch transformers peft bert-score numpy tqdm
```

### λ¨λΈ νμΈνλ‹
```bash
# PEFT κΈ°λ° νμΈνλ‹
python scripts/peft_medical_finetuning.py
```

### λ¨λΈ ν‰κ°€
```bash
# Basic ν”„λ΅¬ν”„νΈ ν‰κ°€
python scripts/peft_medical_evaluation.py

# Improved ν”„λ΅¬ν”„νΈ ν‰κ°€
python scripts/improved_prompt_evaluation.py

# Optimized ν”„λ΅¬ν”„νΈ ν‰κ°€
python scripts/optimized_prompt_evaluation.py

# 3κ° ν”„λ΅¬ν”„νΈ λΉ„κµ
python scripts/triple_prompt_comparison.py
```

## π“ μ„±λ¥ λ¨λ‹ν„°λ§
- BERTScoreλ¥Ό ν†µν• μ •ν™•λ„ μΈ΅μ •
- μλ£ νΉν™” λ©”νΈλ¦­ (μ•μ „μ„±, μλ£ μ©μ–΄ ν¬ν•¨λ„ λ“±)
- 3κ°€μ§€ ν”„λ΅¬ν”„νΈ μ „λµ λΉ„κµ λ¶„μ„

